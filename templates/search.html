{% extends 'base.html' %}
{% block title %}Search - Weather App{% endblock %}
{% block header %}Search Weather{% endblock %}
{% block content %}
<div class="search-container">
    <h1>Search Weather</h1>
    <p><strong>City name to get Current Weather:</strong></p>
    
    <form method="POST">
        <div class="form-group">
            <label for="city">City:</label>
            <input type="text" name="city" id="city" pattern="[A-Za-z\s]+" title="Please enter a valid city name" required>
        </div>
        <button type="submit">Get Weather</button>
    </form>

    {% if weather %}
    <div class="weather-info">
        <h2>Weather in {{ city }}</h2>
        <img src="http://openweathermap.org/img/w/{{ weather.icon }}.png" alt="Weather icon" class="weather-icon">
        <p>Current Temperature: {{ weather.temperature }} {{ unit == 'imperial' and 'Â°F' or 'Â°C' }}</p>
        <p>High Temperature: {{ weather.temp_max }} {{ unit == 'imperial' and 'Â°F' or 'Â°C' }}</p>
        <p>Low Temperature: {{ weather.temp_min }} {{ unit == 'imperial' and 'Â°F' or 'Â°C' }}</p>
        <p>Humidity: {{ weather.humidity }}%</p>
        <p>Wind Speed: {{ weather.wind.speed }} m/s</p>
        <p>Description: {{ weather.weather_desc|title }}</p>
        <p>
            Air Quality Index (AQI):
            <span style="display: inline-block; width: 10px; height: 10px; background-color: {{ weather.aqi.color }}; border-radius: 50%; margin-right: 5px;"></span>
            {{ weather.aqi.level | default('N/A') }}
        </p>
    
        {% if weather.tips %}
        <div class="weather-tips">
            {% for tip in weather.tips %}
            <div class="weather-tip">
                <span class="weather-tip-icon">ðŸ’¡</span>
                {{ tip }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    {% elif error %}
    <p class="error-message">{{ error }}</p>
    {% endif %}
</div>
{% endblock %}